<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Import</title>
        <script type="text/javascript" src="../../../_utils/script/jquery.js"></script>
        <style type="text/css">
            #spinner {
                display: none;
            }
        </style>
    </head>
    <body>
        <h2>Import</h2>
        <strong>Please choose an <a href="http://www.w3.org/TR/rdf-testcases/#ntriples">N-Triples</a> file without blank nodes to import.</strong><br />
        <div>
            <input type="file" id="file" />
        </div>
        <div>
            <input id="import" type="button" value="Import triples" />
            <img id="spinner" src="../../../_utils/image/spinner.gif" />
        </div>
    </body>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#import").click(function () {
                var file, reader;
                $("#spinner").show();
                file = document.getElementById("file").files[0];
                if (file) {
                    reader = new FileReader();
                    reader.readAsText(file);
                    reader.onload = function (event) {
                        var payload, worker;
                        payload = event.target.result;
                        worker = new Worker("scripts/import-worker.js");
                        worker.onmessage = function (message) {
                            if (message.data.code === 0) {
                                alert(message.data.msg);
                            } else {
                                alert("Something went wrong.");
                            }
                            $("#spinner").hide();
                        };
                        worker.postMessage(payload);
                    };
                } else {
                    $("#spinner").hide();
                    alert("Please provide an N-Triples file.");
                }
            });
        });
    </script>
</html>
